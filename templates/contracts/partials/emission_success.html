{% load humanize %}
<div class="bg-gray-900 text-white p-6 rounded-lg shadow-lg border border-green-500">
    {% if error %}
        <div class="p-3 bg-red-900/40 text-red-300 rounded mb-6">{{ error }}</div>
    {% else %}
        <div class="text-center mb-6">
            <div class="inline-flex items-center justify-center w-16 h-16 bg-green-600 rounded-full mb-4">
                <i class="fas fa-check-circle text-2xl text-green-300"></i>
            </div>
            <h2 class="text-2xl font-bold mb-2 text-green-400">
                {{ success_message|default:"Reussie !" }}
            </h2>
        </div>

        <div class="bg-gray-800 rounded-lg p-4 mb-6 border border-green-700">
            <div class="grid grid-cols-2 gap-4 text-sm">
                <div>
                    <span class="text-green-400">N° Police:</span>
                    <span class="font-bold text-white">
                        {{ contrat.numero_police|default:"—" }}
                    </span>
                </div>
                <div>
                    <span class="text-green-400">Prime TTC:</span>
                    <span class="font-bold text-white">
                        {{ contrat.prime_ttc|default_if_none:0|floatformat:0|intcomma }} FCFA
                    </span>
                </div>
                <div>
                    <span class="text-green-400">Client:</span>
                    <span class="font-bold text-white">
                        {{ contrat.client.nom_complet|default:"—" }}
                    </span>
                </div>
                <div>
                    <span class="text-green-400">Véhicule:</span>
                    <span class="font-bold text-white">
                        {{ contrat.vehicule.immatriculation|default:"—" }}
                    </span>
                </div>
            </div>
        </div>

        <div class="flex flex-wrap justify-center gap-4">
            <a href="{% url 'contracts:detail_contrat' pk=contrat.pk %}"
               class="bg-green-600 hover:bg-green-500 text-white px-4 py-2 rounded-lg transition flex items-center">
                <i class="fas fa-eye mr-2"></i>Voir le Contrat
            </a>

            {% with att=contrat.link_attestation|default_if_none:'' carte=contrat.link_carte_brune|default_if_none:'' %}
                {% if att %}
                    <a href="{{ att }}"
                       target="_blank"
                       rel="noopener noreferrer"
                       class="bg-green-700 hover:bg-green-600 text-white px-4 py-2 rounded-lg transition flex items-center">
                        <i class="fas fa-file-pdf mr-2"></i>Attestation
                    </a>
                {% endif %}
                {% if carte %}
                    <a href="{{ carte }}"
                       target="_blank"
                       rel="noopener noreferrer"
                       class="bg-green-800 hover:bg-green-700 text-white px-4 py-2 rounded-lg transition flex items-center">
                        <i class="fas fa-id-card mr-2"></i>Carte Brune
                    </a>
                {% endif %}
            {% endwith %}

            <a href="{% url 'contracts:telecharger_documents' pk=contrat.pk %}"
               download
               class="bg-blue-700 hover:bg-blue-600 text-white px-4 py-2 rounded-lg transition flex items-center">
                <i class="fas fa-download mr-2"></i>Détail
            </a>
        </div>
    {% endif %}
</div>
